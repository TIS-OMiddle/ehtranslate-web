var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&c(e,a,t[a]);if(n)for(var a of n(t))s.call(t,a)&&c(e,a,t[a]);return e},o=(e,n)=>t(e,a(n));import{l as m,R as i,F as u,P as p,I as d,S as f,d as E,B as y,C as h,T as x,A as b,a as g}from"./vendor.6978957e.js";const v=m.createInstance({name:"ehtranslate-web",driver:m.INDEXEDDB}),S={data:null,loading:!0},k=i.createContext(o(l({},S),{refetchData:()=>{}}));async function N(e=!1){let t=await v.getItem("TRANSLATE_KEY");return t&&!e?t=JSON.parse(t):(t=await(await fetch("https://cdn.jsdelivr.net/gh/EhTagTranslation/DatabaseReleases@master/db.full.json")).json(),v.setItem("TRANSLATE_KEY",JSON.stringify(t))),t}const j=({children:e})=>{const[t,a]=u.exports.useState(S),n=u.exports.useCallback((()=>{a(S),N(!0).then((e=>a({data:e,loading:!1})))}),[]);return u.exports.useEffect((()=>{N().then((e=>a({data:e,loading:!1})))}),[]),i.createElement(k.Provider,{value:o(l({},t),{refetchData:n})},e)};function w(){return u.exports.useContext(k)}function M(){const{data:{data:e}}=w();return u.exports.useMemo((()=>e.filter((e=>"rows"!==e.namespace)).map((e=>({count:e.count,namespace:e.namespace,name:e.frontMatters.name,description:e.frontMatters.description,keys:Object.keys(e.data),keyMap:e.data})))),[e])}const{Item:O}=p;function D({onSearch:e,onNamespacesChange:t}){const[a,n]=u.exports.useState(""),[r,s]=u.exports.useState([]),c=M(),l=u.exports.useMemo((()=>c.map((e=>i.createElement(O,{key:e.namespace,className:r.includes(e.namespace)?"text-blue-500":""},e.name)))),[c,r]);return i.createElement("div",{className:"flex items-center px-2",style:{background:"#efeff4"}},i.createElement(p,{placement:"bottomLeft",onSelect:e=>{let a=[...r];a.includes(e.key)?a=a.filter((t=>t!==e.key)):a.push(e.key),s(a),t(a)},overlay:l},i.createElement(d,{type:"ellipsis",className:"text-gray-800"})),i.createElement(f,{className:"flex-1",value:a,onChange:n,onSubmit:e,onCancel:()=>{n(""),e("")},placeholder:"Search..."}))}function C(){const{data:e,refetchData:t}=w(),a=u.exports.useMemo((()=>e.head.message.split("\n").map(((e,t)=>i.createElement("div",{key:t},e)))),[e]);return i.createElement("div",null,i.createElement("div",{className:"mb-4 flex items-center justify-between"},i.createElement("span",null,"最近更新: ",E(e.head.author.when).format("YYYY-MM-DD HH:mm:ss")),i.createElement(y,{inline:!0,size:"small",type:"primary",onClick:t},"更新")),a)}const I=new h(".copy-btn");function T({info:e}){return i.createElement("div",{className:"flex flex-col p-2 bg-pink-200 mb-2 rounded shadow"},i.createElement("div",{className:"flex justify-end items-center"},i.createElement("span",{className:"mr-1 font-semibold"},e.name.text),i.createElement(y,{inline:!0,size:"small",type:"primary"},i.createElement("button",{className:"copy-btn","data-clipboard-text":`${e.namespace}:"${e.key}"`},"复制"))),i.createElement("div",{dangerouslySetInnerHTML:{__html:e.intro.html}}))}function P({search:e,namespaces:t}){const a=M(),n=u.exports.useMemo((()=>{if(!e)return[];return a.filter((e=>!t.length||t.includes(e.namespace))).map((t=>{const a=[];return t.keys.forEach((n=>{const r=t.keyMap[n];r.name.text.includes(e)&&a.push(l({namespace:t.namespace,key:n},r))})),a})).flat()}),[a,e,t]);return i.createElement(i.Fragment,null,n.map((e=>i.createElement(T,{key:e.key,info:e}))))}function Y(){const[e,t]=u.exports.useState(""),[a,n]=u.exports.useState([]),{loading:r}=w();return r?i.createElement("div",{className:"flex items-center justify-center h-screen"},i.createElement(b,{animating:!0,size:"large",text:"加载数据..."})):i.createElement("div",null,i.createElement(D,{onSearch:t,onNamespacesChange:n}),i.createElement("div",{className:"p-2 text-gray-900"},e?i.createElement(P,{search:e,namespaces:a}):i.createElement(C,null)))}function A(){return i.createElement(j,null,i.createElement(Y,null))}I.on("success",(e=>{x.success(`复制 '${e.text}' 成功`),e.clearSelection()})),I.on("error",(e=>{x.fail(`复制 '${e.text}' 失败`)})),g.render(i.createElement(i.StrictMode,null,i.createElement(A,null)),document.getElementById("root"));
